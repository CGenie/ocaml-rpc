(library
 ((name rpclib.syntax)
  (public_name rpclib-camlp4.syntax)
  (modules (pa_rpc p4_rpc pa_module_conv))
  (modes (byte))
  (libraries (camlp4
              rpclib
              type_conv
              result))
  (preprocess (action (run camlp4orf ${<})))
  (wrapped false)
))

(library
 ((name rpclib.idl)
  (public_name rpclib-camlp4.idl)
  (modules (p4_idl))
  (modes (byte))
  (libraries (camlp4
              result
              rpclib
              rpclib-camlp4.syntax))
  (preprocess (action (run camlp4orf ${<})))
  (wrapped false)
 ))

